(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const e of c.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&r(e)}).observe(document,{childList:!0,subtree:!0});function d(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(n){if(n.ep)return;n.ep=!0;const c=d(n);fetch(n.href,c)}})();const l=(()=>{let o=[["X","O","X"],["X","O","X"],["O","X","O"]];return{drawBoard:()=>{const e=o.flat();for(let t=0;t<e.length;t++)document.getElementById(t).innerHTML=e[t]},clearBoard:()=>{o=o.map(e=>[" "," "," "])},checkValidMove:e=>!e||(e=e.split("/"),e.length!==2)||+e[0]>2||+e[0]<0||+e[1]>2||+e[1]<0?!1:o[e[0]][e[1]]===" ",noLegalMoves:()=>{let e;for(let t=0;t<2;t++){if(t==0&&(e="O"),t==1&&(e="X"),o[0][0]==e&&o[1][1]==e&&o[2][2]==e||o[0][2]==e&&o[1][1]==e&&o[2][0]==e)return e;for(let s=0;s<3;s++)if(o[s][0]===e&&o[s][1]===e&&o[s][2]===e)return e;for(let s=0;s<3;s++)if(o[0][s]===e&&o[1][s]===e&&o[2][s]===e)return e}return o.flat().includes(" ")?0:"draw"},updateState:(e,t)=>{e.length!=="2"&&(e=e.split("/")),o[e[0]][e[1]]=t}}})(),u=(()=>{const o=document.querySelector(".game-container"),a=document.querySelector(".home"),d=document.querySelector(".win-screen"),r=t=>{const s=document.querySelector(".go-button"),i=document.querySelector(".option-x"),m=document.querySelector(".option-o"),f=document.querySelector(".easy-ai"),y=document.querySelector(".easier-ai");t&&(o.classList.remove("onscreen"),a.classList.remove("onscreen"),r());const L=["X","Bot"];i.addEventListener("click",()=>{i.classList.add("selected"),m.classList.remove("selected"),L[0]="X"}),m.addEventListener("click",()=>{m.classList.add("selected"),i.classList.remove("selected"),L[0]="O"}),f.addEventListener("click",()=>{f.classList.add("selected"),y.classList.remove("selected")}),y.addEventListener("click",()=>{y.classList.add("selected"),f.classList.remove("selected")}),s.addEventListener("click",()=>{o.classList.toggle("onscreen"),a.classList.toggle("onscreen");const v=g.createPlayers(L);S.startGame(v)})};return{getPlayerInput:(t,s)=>{let i=s.target.dataset.cellid;if(t.name==="Bot"){do i=g.easyAI();while(!l.checkValidMove(i));return i}},updateScores:t=>{const s=document.querySelector(".x-score"),i=document.querySelector(".o-score");if(t[0].symbol==="X"){s.innerHTML=t[0].wins,i.innerHTML=t[1].wins;return}else s.innerHTML=t[1].wins,i.innerHTML=t[0].wins},displayHome:r,displayWinScreen:t=>{const s=document.querySelector(".winner");s.innerHTML=t.symbol,o.classList.remove("onscreen"),d.classList.remove("onscreen"),document.querySelector(".giveup-btn2").addEventListener("click",()=>{d.classList.add("onscreen"),a.classList.remove("onscreen"),t.resetPlayers(),u.displayHome("restart")})}}})(),g=(()=>{let o=0,a="Player One";const d=()=>{o=0},r=e=>{let t=e[0];o===1&&(t=e[0]==="X"?"O":"X",e[1]==="human"?a="Player Two":a="Bot");const s=t==="X"?0:1;return o++,{symbol:t,order:s,name:a,wins:0}};return{createPlayers:e=>{const t=r(e),s=r(e);return[t,s]},easyAI:()=>{let e=Math.floor(Math.random()*3),t=Math.floor(Math.random()*3);return`${e}/${t}`},resetPlayers:d}})(),S=(()=>{const o=r=>{const n=l.noLegalMoves();l.drawBoard(),n!=="draw"&&(n===r[0].symbol?r[0].wins++:r[1].wins++),console.table(r),r[0].wins===2||r[1].wins===2?r[0].wins>r[1].wins?u.displayWinScreen(r[0]):u.displayWinScreen(r[1]):S.startGame(r)},a=(r,n)=>{if(!l.checkValidMove(n.target.dataset.cellid))return!1;let c=n.target.dataset.cellid;if(l.updateState(c,r[0].symbol),l.drawBoard(),l.noLegalMoves()){o(r);return}let e=u.getPlayerInput(r[1],n);l.updateState(e,r[1].symbol),setTimeout(l.drawBoard,1e3),l.noLegalMoves()&&o(r)};return{startGame:r=>{l.clearBoard(),u.updateScores(r),l.drawBoard();const n=t=>{a(r,t)};document.querySelectorAll(".cell").forEach(t=>{t.addEventListener("click",n)}),document.querySelector(".giveup-btn").addEventListener("click",()=>{r.pop(),r.pop(),g.resetPlayers(),u.displayHome("restart")})}}})();u.displayHome();
